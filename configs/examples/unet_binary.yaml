# Binary segmentation with UNet
# This config demonstrates a simple binary segmentation setup

experiment:
  name: "unet-binary-example"
  project: "tutorials"
  seed: 42

model:
  architecture: "unet"
  task: "binary"
  num_classes: 1
  encoder_depth: 4
  decoder_channels: [256, 128, 64, 32]
  dropout: 0.2
  norm_layer: "batchnorm"
  activation: "relu"

data:
  format: "png"
  train:
    images: "data/train/images"
    masks: "data/train/masks"
  val:
    images: "data/val/images"
    masks: "data/val/masks"
  batch_size: 16
  num_workers: 4

training:
  epochs: 100
  optimizer:
    name: "adamw"
    lr: 0.001
    weight_decay: 0.01
  scheduler:
    name: "cosine"
    warmup_epochs: 5
    min_lr: 0.000001
  loss: "bce_dice"
  loss_weights:
    bce: 1.0
    dice: 1.0
  amp: true
  gradient_clip: 1.0

augmentations:
  train:
    - name: "resize"
      height: 256
      width: 256
    - name: "horizontal_flip"
      p: 0.5
    - name: "vertical_flip"
      p: 0.5
    - name: "rotate"
      limit: 30
      p: 0.5
    - name: "random_brightness_contrast"
      p: 0.3
    - name: "normalize"
      mean: [0.485, 0.456, 0.406]
      std: [0.229, 0.224, 0.225]
  val:
    - name: "resize"
      height: 256
      width: 256
    - name: "normalize"
      mean: [0.485, 0.456, 0.406]
      std: [0.229, 0.224, 0.225]

tracking:
  backend: "mlflow"
  uri: "mlruns"
  log_every_n_steps: 50

checkpointing:
  save_best: true
  save_last: true
  monitor: "val/loss"
  mode: "min"
